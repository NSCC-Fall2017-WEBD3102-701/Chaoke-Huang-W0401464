<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:f="http://xmlns.jcp.org/jsf/core"
>

<ui:composition template="layout.xhtml">

    <ui:define name="heading">Sleeping Well</ui:define>

    <ui:define name="secondPart">
        <h3><h:outputLabel value="#{flash['feedback']}"/></h3>
    </ui:define>

    <ui:define name="content">

        <div class="row">
            <h3 class="offset-4 col-4">#{product.name}</h3>
        </div>

        <div class="row">
            <div style="height: 18em;" class="offset-3 col-2">
                <h:graphicImage value="#{product.pic_ref}" style="max-height: 18em;"/>
            </div>
        </div>
        <div class="row">
            <p class="offset-3 col-4">#{product.description}</p>
        </div>
        <div class="row">
            <h4 class="offset-4 col-4">Price: $#{product.price}</h4>
        </div>
        <br></br>
        <div class="row">
            <h4 class="offset-3 col-1"><h:outputLabel id="amount" value="#{purchase.amount}"/></h4>
            <h:form styleClass="col-1" preparedId="false">
                <h:commandButton value="+" styleClass="btn btn-info">
                    <f:ajax event="click" render="amount" listener="#{purchase.addAmount}"/>
                </h:commandButton>
            </h:form>
            <h:form preparedId="false" styleClass="col-1">
                <h:commandButton value="-" styleClass="btn btn-info">
                    <f:ajax event="click" render="amount" listener="#{purchase.subAmount}"/>
                </h:commandButton>
            </h:form>
        </div>
        <br></br>
        <div class="row">
            <div class="offset-4">
                <h:form method="post" action="#">

                    <h:inputHidden value="#{product.id}" />
                    <h:inputHidden value="#{product.name}" />
                    <h:inputHidden value="#{product.price}" />
                    <h:inputHidden value="#{product.description}" />
                    <h:inputHidden value="#{product.pic_ref}" />
                    <h:inputHidden value="#{product.softDeleted}" />
                    <h:commandButton action="#{orderService.addPurchase(product,purchase.amount)}" value="Add to Cart" styleClass="btn btn-primary"/>
                </h:form>
            </div>
        </div>
    </ui:define>
</ui:composition>

</html>